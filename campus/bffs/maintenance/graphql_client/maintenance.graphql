mutation saveOrganizationLocation(
  $organizationId: Int!
  $organizationLocation: OrganizationLocation!
) {
  saveOrganizationLocation(
    organizationId: $organizationId
    organizationLocation: $organizationLocation
  ) {
    id
    organization_id
    location_name
    description
  }
}

query getLocationsByOrganization($organizationId: Int!) {
  locationsByOrganization(organizationId: $organizationId) {
    id
    organization_id
    location_name
    description
  }
}

query getEmployeesByOrganization($organization_id: Int!, $avinya_type_id: Int) {
  persons(organization_id: $organization_id, avinya_type_id: $avinya_type_id) {
    id
    preferred_name
  }
}

mutation createMaintenanceTask(
  $organizationId: Int!
  $maintenanceTask: MaintenanceTask!
  $finance: MaintenanceFinance
  $materialCosts: [MaterialCost!]
) {
  createMaintenanceTask(
    organizationId: $organizationId
    maintenanceTask: $maintenanceTask
    finance: $finance
    materialCosts: $materialCosts
  ) {
    id
  }
}

query MaintenanceTasks(
    $organizationId: Int!,
    $personId: [Int!],
    $fromDate: String,
    $toDate: String,
    $taskStatus: String,
    $financialStatus: String,
    $taskType: String,
    $location: Int,
    $title: String,
    $limit: Int!,
    $offset: Int!
) {
    maintenanceTasks(
        organizationId: $organizationId,
        personId: $personId,
        fromDate: $fromDate,
        toDate: $toDate,
        taskStatus: $taskStatus,
        financialStatus: $financialStatus,
        taskType: $taskType,
        title: $title,
        location: $location,
        limit: $limit,
        offset: $offset
    ) {
        id
        start_time
        end_time
        overall_task_status
        task {
            id
            title
            description
            task_type
            frequency
            exception_deadline
            location {
                id
                location_name
            }
        }
        activity_participants {
            id
            participant_task_status
            person {
                id
                preferred_name
            }
        }
        finance {
            id
            estimated_cost
            labour_cost
            material_costs {
                id
                item
                quantity
                unit
                unit_cost
            }
            status
            rejection_reason
            reviewed_by
            reviewed_date
        }
    }
}

query GetOverdueMaintenanceTasks($organizationId: Int!) {
    overdueMaintenanceTasks(organizationId: $organizationId) {
        id
        task_id
        start_time
        end_time
        overall_task_status
        overdue_days
        task {
            id
            title
            description
            task_type
            frequency
            location {
                id
                location_name
            }
        }
        activity_participants {
            id
            participant_task_status
            person {
                id
                preferred_name
            }
        }
    }
}

mutation updateMaintenanceTask(
  $organizationId: Int!
  $maintenanceTaskActivityInstance: ActivityInstance!
  $maintenanceTask: MaintenanceTask!
  $maintenanceTaskParticipantList: [Int!]!
  $finance: MaintenanceFinance
  $materialCosts: [MaterialCost!]
) {
  updateMaintenanceTask(
    organizationId: $organizationId
    maintenanceTaskActivityInstance: $maintenanceTaskActivityInstance
    maintenanceTask: $maintenanceTask
    maintenanceTaskParticipantList: $maintenanceTaskParticipantList
    finance: $finance
    materialCosts: $materialCosts
  ) {
    id
    start_time
    end_time
    overall_task_status
    task {
      id
      title
      description
      task_type
      frequency
      exception_deadline
      location {
        id
        location_name
      }
    }
    activity_participants {
      id
      participant_task_status
      person {
        id
        preferred_name
      }
    }
    finance {
      id
      estimated_cost
      labour_cost
      material_costs {
        id
        item
        quantity
        unit
        unit_cost
      }
      status
      rejection_reason
      reviewed_by
      reviewed_date
    }
  }
}
mutation SoftDeactivateMaintenanceTask($taskId: Int!, $modifiedBy: String!) {
  softDeactivateMaintenanceTask(
    taskId: $taskId,
    modifiedBy: $modifiedBy
  ) {
    id
    modified_by
  }
}

mutation UpdateMaintenanceFinance(
  $financeId: Int!,
  $maintenanceFinance: MaintenanceFinance!
) {
  updateMaintenanceFinance(
    financeId: $financeId,
    maintenanceFinance: $maintenanceFinance
  ) {
    status
    rejection_reason
    reviewed_by
  }
}

query GetMonthlyMaintenanceReport($organizationId: Int!, $year: Int!, $month: Int!) {
  monthlyMaintenanceReport(organizationId: $organizationId, year: $year, month: $month) {
    totalTasks
    completedTasks
    inProgressTasks
    pendingTasks
    totalCosts
    totalUpcomingTasks
    nextMonthlyEstimatedCost
  }
}

query MaintenanceTasksByStatus(
    $organizationId: Int!,
    $month: Int!,
    $year: Int!,
    $overallTaskStatus: String,
    $limit: Int!,
    $offset: Int!
) {
    maintenanceTasksByMonthYearStatus(
        organizationId: $organizationId,
        month: $month,
        year: $year,
        overallTaskStatus: $overallTaskStatus,
        limit: $limit,
        offset: $offset
    ) {
        id
        start_time
        end_time
        overall_task_status
        task {
            id
            title
            description
            task_type
            frequency
            exception_deadline
            location {
                id
                location_name
            }
        }
        activity_participants {
            id
            participant_task_status
            person {
                id
                preferred_name
            }
        }
    }
}

query MonthlyTaskCostReport($organizationId: Int!, $year: Int!, $month: Int!) {
  monthlyTaskCostReport(organizationId: $organizationId, year: $year, month: $month) {
    organizationId
    year
    month
    totalActualCost
    totalEstimatedCost
    tasks {
      taskId
      taskTitle
      actualCost
      estimatedCost
    }
  }
}
