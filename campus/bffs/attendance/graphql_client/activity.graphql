query getActivity($name: String!) {
    activity(name:$name) {
        id
        name
        description
        notes
        activity_instances {
            id
            name
            description
            notes
            start_time
            end_time
            daily_sequence
            weekly_sequence
            monthly_sequence
        }
        child_activities {
            id
            name
            description
            notes
            activity_instances {
                id
                name
                description
                notes
                start_time
                end_time
                daily_sequence
                weekly_sequence
                monthly_sequence
            }
            activity_sequence_plan {
                id
                sequence_number
                timeslot_number
                organization {
                    id
                    name {
                        name_en
                    }
                }
                person {
                    preferred_name
                }
            }
        }
    }
}

 mutation addActivityAttendance($attendance: ActivityParticipantAttendance!)
{
    add_attendance(attendance:$attendance){
        id
        activity_instance_id
        sign_in_time
        sign_out_time
        created
    }
}

query getActivityInstancesToday($id: Int!) {
    activity_instances_today(activity_id:$id) {
        id
        activity_id
        name
        daily_sequence
        weekly_sequence
        monthly_sequence
        description
        notes
        start_time
        end_time
        created
        updated
        place {
            id
        }
        organization {
            id
        }
    }
}

query getClassAttendanceToday($organization_id: Int!, $activity_id: Int!) {
    class_attendance_today(organization_id:$organization_id, activity_id: $activity_id) {
        id
        person_id
        person {
            id
        }
        activity_instance_id
        sign_in_time
        sign_out_time
        in_marked_by
        out_marked_by
    }      
}

query getClassAttendanceReport($organization_id: Int!, $activity_id: Int!, $result_limit: Int!, $from_date: String!, $to_date: String!) {
    class_attendance_report(organization_id:$organization_id, activity_id: $activity_id, result_limit: $result_limit, from_date: $from_date, to_date: $to_date) {
        id
        person {
            id
        }
        activity_instance_id
        sign_in_time
        sign_out_time
        in_marked_by
        out_marked_by
    }      
}

query getPersonAttendanceReport($person_id: Int!, $activity_id: Int!, $result_limit: Int!) {
    person_attendance_report(person_id:$person_id, activity_id: $activity_id, result_limit: $result_limit) {
        id
        person {
            id
        }
        activity_instance_id
        sign_in_time
        sign_out_time
        in_marked_by
        out_marked_by
    }      
}

query getPersonAttendanceToday($person_id: Int!, $activity_id: Int!) {
    person_attendance_today(person_id:$person_id, activity_id: $activity_id) {
        id
        person {
            id
        }
        activity_instance_id
        sign_in_time
        sign_out_time
        in_marked_by
        out_marked_by
    }      
}

query getActivityEvaluations($activity_id: Int!) {
    activity_evaluations(activity_id:$activity_id) {
        id
        evaluatee_id
        evaluator_id
        evaluation_criteria_id
        response
        notes
        grade
        activity_instance_id
        updated
    }      
}

query getActivityInstanceEvaluations($activity_instance_id: Int!) {
    activity_instance_evaluations(activity_instance_id:$activity_instance_id) {
        id
        evaluatee_id
        evaluator_id
        evaluation_criteria_id
        response
        notes
        grade
        activity_instance_id
        updated
    }      
}

mutation updateEvaluations($evaluation: Evaluation!)
{
    update_evaluation(evaluation:$evaluation) {
        id
        evaluatee_id
        evaluator_id
        evaluation_criteria_id
        response
        notes
        grade
        activity_instance_id
        updated
    }       
}

query getDutyParticipants{
   duty_participants{
    id
    activity {
        id
        name
        description  
    }
    person {
        preferred_name
        digital_id
        organization {
            name {
                name_en
            }
            description
        }
    }
    role
    start_date
    end_date
   }
}

mutation createDutyForParticipant($dutyparticipant: DutyParticipant!){
    
    add_duty_for_participant(dutyparticipant:$dutyparticipant){
       id
       activity_id
       person_id
       role
       start_date
       end_date
       created
    }
}

query getActivitiesByAvinyaType($avinya_type_id: Int!) {
    activities_by_avinya_type(avinya_type_id:$avinya_type_id){
        id
        name
        description
        notes
    }
}